<!DOCTYPE html>
<html>
    <body style="text-align:center; padding-top: 1cm; font-size:x-large">
    
        <section id="ip">

        </section>
        
        <section id="loc">

        </section>

            
        <script type="application/javascript">

            var iipp
            let loc = document.getElementById("loc")
            var ddd
            let b = document.getElementById("ip")
            // 1 - ip api
            function getIP(json) {
                b.innerHTML = "Your Current public IP address is: "+ json.ip + "<br><br>";
                iipp = json.ip
            };

            // 2 - fetch() : location
            

            fetch('http://ip-api.com/json/', iipp)
            .then(function(response) {
             return response.json()
            })
            .then(function(data) {
             loc.innerHTML = "Address of your IP is: "+ data.city+" City, " +  data.regionName + ",  " + data.country ;
             ddd = data.json
            }); 

            // weather using ip

            fetch('https://ipapi.co/'+iipp+'/'+ ddd.lat + ddd.lon+'/', function(response){
            var latlong = response.split(',');
            console.log(latlong);
            $.get('http://api.openweathermap.org/data/2.5/weather?lat=' + latlong[0] + '&lon=' + latlong[1] + '&appid=API_KEY', function(wResponse){
            console.log(weather);
  })
})

          </script>
          
          <script type="application/javascript" src="https://api.ipify.org?format=jsonp&callback=getIP"></script>
    </body>
</html>